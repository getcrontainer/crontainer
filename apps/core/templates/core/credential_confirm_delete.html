{% extends 'core/base2.html' %}
{% load widget_tweaks %}
{% block content %}
    <div class="container p-2">
        <h3 class="text-3xl text-gray-700 font-medium">Remove Credential</h3>
    </div>
    <div class="max-w-2xl p-2">
        <form action="." method="post">
            {% csrf_token %}
            <p>
                Remove credential <b>{{ object.name }}</b>
            </p>
            <br />
            {% if related_schedules %}
                <p>This credential is used in the following schedules:</p>
                <ul class="divide-y">
                    {% for schedule in related_schedules %}
                        <li class="ms-4 w-1/2 {% if not forloop.first %}pt-2.5{% endif %}">- {{ schedule.name }}</li>
                    {% endfor %}
                </ul>
                <br />
                <div class="mb-2">
                    {{ form.agreement|add_class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" }}
                    {{ form.agreement.label }}
                </div>
            {% endif %}
            <button type="submit"
                    {% if related_schedules %} disabled class="btn btn-disabled" {% else %} class="btn btn-danger" {% endif %}>
                Confirm
            </button>
        </form>
    </div>
{% endblock %}
{% if related_schedules %}
    {% block footer %}
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const checkbox = document.getElementById('id_agreement');
            const submitButton = document.querySelector('button[type="submit"]');

            checkbox.addEventListener('change', function() {
                if (checkbox.checked) {
                    submitButton.disabled = false;
                    submitButton.classList.remove('btn-disabled');
                    submitButton.classList.add('btn-danger');
                } else {
                    submitButton.disabled = true;
                    submitButton.classList.add('btn-disabled');
                    submitButton.classList.remove('btn-danger');
                }
            });
        });
        </script>
    {% endblock footer %}
{% endif %}
